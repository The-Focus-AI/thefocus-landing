---
import BaseLayout from "../layout/BaseLayout.astro";
import { getCaseStudies, getCaseStudyUrl } from "../utils/case-studies.js";

const allCaseStudies = await getCaseStudies();

const pillars = [
  {
    number: "01",
    title: "CONNECT",
    subtitle: "Make siloed data AI-accessible",
    pain: "Your data exists. It's valuable. But it lives in APIs your team can't query, spreadsheets with different naming conventions, and documents that require 15 minutes of manual entry. The information is there—it's just not accessible in ways that let people actually use it.",
    solution: "We build bridges between your systems and AI. REST APIs become conversational interfaces. Spreadsheets become unified databases. PDFs become structured data. The result: people can ask questions in plain English and get answers in seconds.",
    caseStudies: ["tezlab-ai", "upperhand-ai", "onboarding"],
    featuredCaseStudy: "tezlab-ai"
  },
  {
    number: "02",
    title: "CURATE",
    subtitle: "Build interfaces for the task at hand",
    pain: "Most interfaces try to do everything for everyone. The result is dashboards nobody reads, features nobody uses, and workflows that require five clicks when one would do. Your team deserves tools designed for exactly what they need.",
    solution: "We build focused experiences. Voice-first TV apps for living rooms. Semantic search for image libraries. Chat interfaces that show charts, not text walls. Every interface is designed around a specific task—and disappears when it's done.",
    caseStudies: ["perplexity-samsung", "image-browser", "name-drop-network"],
    featuredCaseStudy: "image-browser"
  },
  {
    number: "03",
    title: "DISTILL",
    subtitle: "Filter noise, surface signal",
    pain: "Twitter alone generates 500 million posts daily. Your inbox gets hundreds of emails. Meeting notes, Slack threads, research reports—they keep piling up. Staying informed means drowning, or missing things that matter.",
    solution: "We build systems that read so you don't have to. AI summaries of Twitter feeds. Transcripts with highlights from hour-long podcasts. Topic extraction across sources. You get the signal without swimming through the noise.",
    caseStudies: ["distill"],
    featuredCaseStudy: "distill"
  }
];

// Helper to get testimonial from a case study
function getTestimonial(caseStudyId: string) {
  const cs = allCaseStudies.find(c => c.id === caseStudyId);
  if (cs?.data.testimonial) {
    return {
      quote: cs.data.testimonial,
      person: cs.data.testimonial_person,
      company: cs.data.testimonial_company
    };
  }
  return null;
}

// Helper to get case study objects from IDs
function getRelatedCaseStudies(caseStudyIds: string[]) {
  return caseStudyIds
    .map(id => allCaseStudies.find(cs => cs.id === id))
    .filter(Boolean);
}
---

<BaseLayout
  pageTitle="Capabilities | Focus.AI"
  description="How we help you distill signal from noise with AI-powered solutions"
  category="capabilities"
>
  <div class="max-w-4xl mx-auto">
    <div class="mb-16">
      <h1 class="text-5xl md:text-7xl font-bold mb-6 text-ink">Three ways we help you focus</h1>
      <p class="text-xl md:text-2xl text-graphite leading-relaxed">
        Every project starts with the same question: what's getting in the way of your team doing great work? We've found the answers cluster around three problems—and we've built solutions for each. But before we build anything, we make sure you understand the trade-offs.
      </p>
    </div>

    <div class="space-y-1">
      {pillars.map((pillar) => {
        const relatedCaseStudies = getRelatedCaseStudies(pillar.caseStudies);
        const testimonial = getTestimonial(pillar.featuredCaseStudy);
        return (
          <div class="border-t border-ink/10 py-10 hover:bg-tint-sage/50 transition-colors px-6 -mx-6">
            <div class="flex gap-8 md:gap-12">
              <div class="text-sm text-graphite/50 mt-2 font-mono">{pillar.number}</div>
              <div class="flex-1">
                {/* Title and subtitle */}
                <div class="mb-4">
                  <h2 class="text-2xl md:text-4xl font-bold text-ink mb-2">{pillar.title}</h2>
                  <p class="text-lg text-petrol font-medium">{pillar.subtitle}</p>
                </div>

                {/* The pain */}
                <div class="mb-6">
                  <h3 class="text-sm uppercase tracking-wider text-graphite/60 mb-2">The problem</h3>
                  <p class="text-graphite leading-relaxed">{pillar.pain}</p>
                </div>

                {/* What we do */}
                <div class="mb-6">
                  <h3 class="text-sm uppercase tracking-wider text-graphite/60 mb-2">What we do</h3>
                  <p class="text-graphite leading-relaxed">{pillar.solution}</p>
                </div>

                {/* Testimonial from featured case study */}
                {testimonial && (
                  <blockquote class="border-l-2 border-petrol pl-4 mb-6">
                    <p class="text-graphite italic">"{testimonial.quote}"</p>
                    <cite class="text-xs text-graphite/60 not-italic">— {testimonial.person}, {testimonial.company}</cite>
                  </blockquote>
                )}

                {/* Related case studies */}
                {relatedCaseStudies.length > 0 && (
                  <div class="text-sm">
                    <span class="text-graphite">See in action:</span>
                    {relatedCaseStudies.map((cs) => (
                      <a href={getCaseStudyUrl(cs)} class="text-petrol hover:underline ml-2">{cs.data.title}</a>
                    ))}
                  </div>
                )}
              </div>
            </div>
          </div>
        );
      })}
    </div>

    <div class="mt-16 pt-16 border-t border-ink/10">
      <h2 class="text-3xl font-bold mb-6 text-ink">Start with what's blocking you</h2>
      <p class="text-xl text-graphite mb-8">
        Whether it's siloed data, overwhelming interfaces, information overload, or simply not knowing where to start—we've probably seen a version of your problem before. We love to educate as much as we love to build. Let's talk about what's actually getting in the way.
      </p>
      <a
        href="mailto:hey@thefocus.ai"
        class="inline-block px-6 py-3 border-2 border-petrol text-petrol font-medium uppercase text-sm tracking-wider hover:bg-petrol hover:text-paper transition-colors"
      >
        Contact Us
      </a>
    </div>
  </div>
</BaseLayout>
