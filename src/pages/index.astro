---
import BaseLayout from "../layout/BaseLayout.astro";
import { getCaseStudies } from "../utils/case-studies";
import type { ImageMetadata } from 'astro';
import { Image } from 'astro:assets';

const case_studies = await getCaseStudies();
const featuredCaseStudies = case_studies.slice(0, 2);

// Load case study images
const images = import.meta.glob<{ default: ImageMetadata }>('/src/content/assets/case-studies/*.{jpeg,jpg,png,gif}', { eager: true });

// Check for video versions (e.g., onboarding_wide.png -> onboarding_wide_loop.mp4)
const videos = import.meta.glob('/public/videos/case-studies/*.mp4');

function getVideoPath(imageName: string | undefined): string | null {
  if (!imageName) return null;
  const videoName = imageName.replace(/\.(png|jpg|jpeg|gif)$/, '_loop.mp4');
  const videoKey = `/public/videos/case-studies/${videoName}`;
  return videos[videoKey] ? `/videos/case-studies/${videoName}` : null;
}
---

<BaseLayout
  pageTitle="Focus.AI | Distill the Signal from the Noise"
  bigHeader={true}
  description="We help you distill signal from noise with AI-powered solutions. Connecting siloed data, building curated interfaces, and enhancing focus."
  showOrganizationSchema={true}
  category="home"
>
  <!-- Hero Section -->
  <section class="py-16 md:py-24">
    <div class="max-w-4xl">
      <h2 class="font-sans text-5xl md:text-7xl font-bold text-ink mb-8 leading-tight">
        Distill the signal from the noise
      </h2>
      <p class="text-xl md:text-2xl text-graphite leading-relaxed mb-12">
        Your data is scattered. Your interfaces are overwhelming. Your team spends more time searching than thinking. We build AI systems that connect what's disconnected, simplify what's complex, and surface what matters—so you can focus on the work that moves your business forward.
      </p>
      <div class="flex flex-col sm:flex-row gap-4">
        <a
          href="/capabilities"
          class="inline-block px-8 py-4 border-2 border-petrol text-petrol font-medium uppercase text-sm tracking-wider hover:bg-petrol hover:text-paper transition-colors text-center"
        >
          Our Capabilities
        </a>
        <a
          href="/case-studies"
          class="inline-block px-8 py-4 border-2 border-ink/20 text-ink font-medium uppercase text-sm tracking-wider hover:border-petrol hover:text-petrol transition-colors text-center"
        >
          View Case Studies
        </a>
      </div>
    </div>
  </section>

  <!-- What We Do -->
  <div class="relative left-1/2 right-1/2 -ml-[50vw] -mr-[50vw] w-screen bg-tint-cool py-16 md:py-24">
    <div class="max-w-screen-xl mx-auto px-4 md:px-8">
      <div class="max-w-4xl">
        <h3 class="text-sm uppercase tracking-widest text-petrol mb-6 font-medium">What We Do</h3>
        <h2 class="font-sans text-4xl md:text-5xl font-bold text-ink mb-12">Three pillars of focus</h2>

        <div class="grid md:grid-cols-3 gap-8">
        <div>
          <div class="text-6xl font-bold text-petrol/20 mb-4">01</div>
          <h4 class="font-sans text-xl font-bold text-ink mb-3">Connect</h4>
          <p class="text-graphite leading-relaxed">
            Your data lives in silos—APIs that don't talk, spreadsheets nobody can find, documents that require manual entry. We build bridges that make your data AI-accessible, so instead of hunting for information, you can simply ask for it.
          </p>
        </div>
        <div>
          <div class="text-6xl font-bold text-petrol/20 mb-4">02</div>
          <h4 class="font-sans text-xl font-bold text-ink mb-3">Curate</h4>
          <p class="text-graphite leading-relaxed">
            One-size-fits-all interfaces waste time. We build task-specific experiences—conversational UIs, visual search, voice-first interactions—designed for exactly what you need to accomplish, nothing more.
          </p>
        </div>
        <div>
          <div class="text-6xl font-bold text-petrol/20 mb-4">03</div>
          <h4 class="font-sans text-xl font-bold text-ink mb-3">Distill</h4>
          <p class="text-graphite leading-relaxed">
            Information overload isn't a badge of honor. We build systems that filter the noise—summarizing content, extracting insights, prioritizing what deserves attention—so you can stop scrolling and start thinking.
          </p>
        </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Case Study Highlights -->
  <section class="py-16 md:py-24">
    <div class="max-w-5xl">
      <h3 class="text-sm uppercase tracking-widest text-petrol mb-6 font-medium">Real Results</h3>
      <h2 class="font-sans text-4xl md:text-5xl font-bold text-ink mb-4">Case Studies</h2>
      <p class="text-xl text-graphite mb-12">
        See how we've helped organizations distill signal from noise and transform their workflows.
      </p>

      <div class="space-y-12">
        {featuredCaseStudies.map((study) => (
          <article class="border border-ink/10 rounded-lg p-8 hover:border-petrol/30 transition-colors">
            <div class="flex flex-col md:flex-row gap-8">
              <div class="flex-1">
                <h3 class="text-2xl font-bold text-ink mb-3">
                  <a href={`/case-study/${study.id}`} class="hover:text-petrol transition-colors">
                    {study.data.title}
                  </a>
                </h3>
                <p class="text-sm text-petrol mb-4">{study.data.industry} • {study.data.year}</p>
                <p class="text-graphite leading-relaxed mb-6">
                  {study.data.description}
                </p>
                {study.data.testimonial && (
                  <blockquote class="border-l-4 border-petrol pl-6 italic text-graphite">
                    <p class="mb-3">"{study.data.testimonial}"</p>
                    <footer class="text-sm not-italic">
                      — {study.data.testimonial_person}, {study.data.testimonial_company}
                    </footer>
                  </blockquote>
                )}
              </div>
              {study.data.image && images[`/src/content/assets/case-studies/${study.data.image}`] && (
                <div class="md:w-64 flex-shrink-0 relative overflow-hidden rounded">
                  {getVideoPath(study.data.image) ? (
                    <video
                      autoplay
                      loop
                      muted
                      playsinline
                      class="w-full h-auto"
                    >
                      <source src={getVideoPath(study.data.image)} type="video/mp4" />
                    </video>
                  ) : (
                    <Image
                      src={images[`/src/content/assets/case-studies/${study.data.image}`].default}
                      alt={study.data.title}
                      class="w-full h-auto"
                      width={256}
                    />
                  )}
                </div>
              )}
            </div>
            <div class="mt-6">
              <a
                href={`/case-study/${study.id}`}
                class="text-petrol hover:underline font-medium uppercase text-sm tracking-wide"
              >
                Read Case Study →
              </a>
            </div>
          </article>
        ))}
      </div>

      <div class="mt-12 text-center">
        <a
          href="/case-studies"
          class="inline-block px-8 py-4 border-2 border-petrol text-petrol font-medium uppercase text-sm tracking-wider hover:bg-petrol hover:text-paper transition-colors"
        >
          View All Case Studies
        </a>
      </div>
    </div>
  </section>

  <!-- How We Do It -->
  <div class="relative left-1/2 right-1/2 -ml-[50vw] -mr-[50vw] w-screen bg-tint-warm py-16 md:py-24">
    <div class="max-w-screen-xl mx-auto px-4 md:px-8">
      <div class="max-w-4xl">
        <h3 class="text-sm uppercase tracking-widest text-petrol mb-6 font-medium">Our Process</h3>
        <h2 class="font-sans text-4xl md:text-5xl font-bold text-ink mb-8">How we do it</h2>

        <div class="prose prose-lg max-w-none text-graphite">
        <p class="text-xl leading-relaxed mb-8">
          Our thoughtful team of strategists, designers and technologists work with you and your organization during an initial strategy phase to familiarize ourselves with your business's core values. What technologies you currently use and understand your metrics and KPIs (Key Performance Indicators).
        </p>

        <div class="bg-paper border-l-4 border-petrol p-8 rounded my-12">
          <p class="text-lg italic text-graphite mb-4">
            "TheFocusAI team guided us through the initial strategy phase with unparalleled clarity and expertise. Their thoughtful questions and structured approach helped us articulate our needs and define concrete goals—making the entire project feel not only achievable, but exciting."
          </p>
          <p class="text-sm font-medium text-ink">
            — <a href="https://www.linkedin.com/in/joshclee/" 
            class="text-petrol hover:underline">Josh Lee</a>, CEO, 
            AI-Solutions
          </p>
        </div>

        <h3 class="font-sans text-2xl font-bold text-ink mb-6">What to expect in this phase:</h3>
        <ul class="space-y-4 mb-8">
          <li class="flex gap-4">
            <span class="text-petrol font-bold flex-shrink-0">→</span>
            <span>Discovery sessions to understand your current systems and pain points</span>
          </li>
          <li class="flex gap-4">
            <span class="text-petrol font-bold flex-shrink-0">→</span>
            <span>Technical assessment of existing infrastructure and data sources</span>
          </li>
          <li class="flex gap-4">
            <span class="text-petrol font-bold flex-shrink-0">→</span>
            <span>Strategic roadmap aligned with your business objectives and KPIs</span>
          </li>
        </ul>

        <p class="text-xl leading-relaxed">
          The studio is designed to move quickly, leveraging new tooling that can help uncover new opportunities, streamline legacy systems or simply get a new system up and running quickly. Everyone inside the studio loves to execute and drive performance.
        </p>
        </div>
      </div>
    </div>
  </div>

  <!-- Products/Tools Preview -->
  <section class="py-16 md:py-24">
    <div class="max-w-4xl">
      <h3 class="text-sm uppercase tracking-widest text-petrol mb-6 font-medium">Our Tools</h3>
      <h2 class="font-sans text-4xl md:text-5xl font-bold text-ink mb-8">TheFocus.AI Products</h2>

      <div class="grid sm:grid-cols-2 gap-6">
        <div class="border border-ink/10 rounded-lg p-6 hover:border-petrol/30 transition-colors">
          <h4 class="font-sans text-xl font-bold text-ink mb-3">Distill for X</h4>
          <p class="text-graphite">Clean up the noise from your X/Twitter feed and focus on what matters.</p>
        </div>
        <div class="border border-ink/10 rounded-lg p-6 hover:border-petrol/30 transition-colors">
          <h4 class="font-sans text-xl font-bold text-ink mb-3">Distill for YouTube</h4>
          <p class="text-graphite">Extract signal from YouTube content without the distractions.</p>
        </div>
        <div class="border border-ink/10 rounded-lg p-6 hover:border-petrol/30 transition-colors">
          <h4 class="font-sans text-xl font-bold text-ink mb-3">Rackets.AI</h4>
          <p class="text-graphite">AI-powered insights for racquet sports enthusiasts.</p>
        </div>
      </div>

      <div class="mt-8">
        <a href="/tools" class="text-petrol hover:underline font-medium uppercase text-sm tracking-wide">
          Explore All Tools →
        </a>
      </div>
    </div>
  </section>
</BaseLayout>
