---
import BaseLayout from "../layout/BaseLayout.astro";
import { getCaseStudies } from "../utils/case-studies";
import type { ImageMetadata } from 'astro';
import { Image } from 'astro:assets';

const case_studies = await getCaseStudies();
const featuredCaseStudies = case_studies.slice(0, 2);

// Load case study images
const images = import.meta.glob<{ default: ImageMetadata }>('/src/content/assets/case-studies/*.{jpeg,jpg,png,gif}', { eager: true });

// Check for video versions (e.g., onboarding_wide.png -> onboarding_wide_loop.mp4)
const videos = import.meta.glob('/public/videos/case-studies/*.mp4');

function getVideoPath(imageName: string | undefined): string | null {
  if (!imageName) return null;
  const videoName = imageName.replace(/\.(png|jpg|jpeg|gif)$/, '_loop.mp4');
  const videoKey = `/public/videos/case-studies/${videoName}`;
  return videos[videoKey] ? `/videos/case-studies/${videoName}` : null;
}
---

<BaseLayout
  pageTitle="Focus.AI | Distill the Signal from the Noise"
  bigHeader={true}
  description="We help you distill signal from noise with AI-powered solutions. Connecting siloed data, building curated interfaces, and enhancing focus."
  showOrganizationSchema={true}
  category="home"
>
  <!-- Hero Section -->
  <section class="py-8 md:py-20">
    <div class="flex flex-col lg:flex-row items-center gap-8 lg:gap-16">
      <!-- Illustration - shows first on mobile, second on desktop -->
      <div class="flex-shrink-0 w-40 sm:w-48 lg:w-[500px] order-first lg:order-last">
        <img 
          src="/images/illustrations/bloom.svg" 
          alt="Growing flower illustration representing clarity emerging from complexity" 
          class="w-full h-auto"
        />
      </div>
      <!-- Text content -->
      <div class="flex-1 max-w-2xl text-center lg:text-left">
        <h2 class="font-sans text-3xl sm:text-5xl md:text-7xl font-bold text-ink mb-6 md:mb-8 leading-tight">
          Distill the signal from the noise
        </h2>
        <p class="text-lg md:text-2xl text-graphite leading-relaxed mb-8 md:mb-12">
          AI is moving fast—and it can feel overwhelming to know where to start. Whether you're modernizing a legacy system, building something new, or figuring out your first step, we help you cut through the noise. We're an AI-first engineering and design studio that builds what matters and teaches you along the way.
        </p>
        <div class="flex flex-col sm:flex-row gap-4 justify-center lg:justify-start">
          <a
            href="/capabilities"
            class="inline-block px-8 py-4 border-2 border-petrol text-petrol font-medium uppercase text-sm tracking-wider hover:bg-petrol hover:text-paper transition-colors text-center"
          >
            Our Capabilities
          </a>
          <a
            href="/case-studies"
            class="inline-block px-8 py-4 border-2 border-ink/20 text-ink font-medium uppercase text-sm tracking-wider hover:border-petrol hover:text-petrol transition-colors text-center"
          >
            View Case Studies
          </a>
        </div>
      </div>
    </div>
  </section>

  <!-- Trophy Wall Section -->
  <div class="relative left-1/2 right-1/2 -ml-[50vw] -mr-[50vw] w-screen">
    <div class="max-w-screen-xl mx-auto px-4 md:px-8 py-16 md:py-20 text-center">
      <!-- Decorative line -->
      <div class="w-12 h-1 bg-petrol/30 mx-auto mb-6"></div>
      
      <p class="text-xs uppercase tracking-[0.2em] text-petrol mb-6 font-medium">
        Trusted Partners
      </p>
      <h2 class="font-sans text-3xl md:text-4xl lg:text-5xl font-bold text-ink mb-5 max-w-4xl mx-auto leading-tight">
        We solve complex problems through design & technology
      </h2>
      <p class="text-lg md:text-xl text-graphite mb-12 max-w-2xl mx-auto leading-relaxed">
        We are an AI-first engineering, product and design company pushing the boundaries of what's possible
      </p>
      
      <!-- Logo Grid with enhanced styling -->
      <div class="bg-paper/60 backdrop-blur-sm rounded-2xl border border-ink/5 shadow-sm p-8 md:p-12 max-w-5xl mx-auto">
        <div class="grid grid-cols-2 md:grid-cols-4 lg:grid-cols-7 gap-10 md:gap-12 items-center justify-items-center">
          <img src="/images/logos/upperhand.svg" alt="Upper Hand" class="h-8 md:h-10 w-auto opacity-60 hover:opacity-100 transition-all duration-300 hover:scale-105" />
          <img src="/images/logos/perplexity.svg" alt="Perplexity" class="h-8 md:h-10 w-auto opacity-60 hover:opacity-100 transition-all duration-300 hover:scale-105" />
          <img src="/images/logos/samsung.svg" alt="Samsung" class="h-8 md:h-10 w-auto opacity-60 hover:opacity-100 transition-all duration-300 hover:scale-105" />
          <img src="/images/logos/tesla.svg" alt="Tesla" class="h-8 md:h-10 w-auto opacity-60 hover:opacity-100 transition-all duration-300 hover:scale-105" />
          <img src="/images/logos/rivian.svg" alt="Rivian" class="h-8 md:h-10 w-auto opacity-60 hover:opacity-100 transition-all duration-300 hover:scale-105" />
          <img src="/images/logos/conedison.svg" alt="Con Edison" class="h-8 md:h-10 w-auto opacity-60 hover:opacity-100 transition-all duration-300 hover:scale-105" />
          <img src="/images/logos/weavegrid.svg" alt="WeaveGrid" class="h-8 md:h-10 w-auto opacity-60 hover:opacity-100 transition-all duration-300 hover:scale-105" />
        </div>
      </div>
    </div>
  </div>

  <!-- What We Do -->
  <div class="relative left-1/2 right-1/2 -ml-[50vw] -mr-[50vw] w-screen bg-paper py-12 md:py-20">
    <div class="max-w-screen-xl mx-auto px-4 md:px-8">
      <div class="max-w-5xl mx-auto">
        <h3 class="text-sm uppercase tracking-widest text-petrol mb-6 font-medium">What We Do</h3>
        <h2 class="font-sans text-4xl md:text-5xl font-bold text-ink mb-8">Three pillars of focus</h2>

        <div class="grid md:grid-cols-3 gap-6">
          <!-- Connect Card -->
          <div class="group">
            <div class="bg-tint-warm rounded-2xl p-4 md:p-6 mb-4 h-32 md:h-auto md:aspect-square flex items-center justify-center transition-transform group-hover:scale-[1.02]">
              <img src="/images/illustrations/connect.svg" alt="Connect illustration" class="w-16 h-16 md:w-40 md:h-40" />
            </div>
            <h4 class="font-sans text-xl font-bold text-ink mb-2">Connect</h4>
            <p class="text-graphite text-sm leading-relaxed">
              Your data lives in silos—APIs that don't talk, spreadsheets nobody can find. We build bridges that make your data AI-accessible.
            </p>
          </div>
          
          <!-- Curate Card -->
          <div class="group">
            <div class="bg-tint-cool rounded-2xl p-4 md:p-6 mb-4 h-32 md:h-auto md:aspect-square flex items-center justify-center transition-transform group-hover:scale-[1.02]">
              <img src="/images/illustrations/curate.svg" alt="Curate illustration" class="w-16 h-16 md:w-40 md:h-40" />
            </div>
            <h4 class="font-sans text-xl font-bold text-ink mb-2">Curate</h4>
            <p class="text-graphite text-sm leading-relaxed">
              One-size-fits-all interfaces waste time. We build task-specific experiences designed for exactly what you need.
            </p>
          </div>
          
          <!-- Distill Card -->
          <div class="group">
            <div class="bg-tint-lavender rounded-2xl p-4 md:p-6 mb-4 h-32 md:h-auto md:aspect-square flex items-center justify-center transition-transform group-hover:scale-[1.02]">
              <img src="/images/illustrations/distill.svg" alt="Distill illustration" class="w-16 h-16 md:w-40 md:h-40" />
            </div>
            <h4 class="font-sans text-xl font-bold text-ink mb-2">Distill</h4>
            <p class="text-graphite text-sm leading-relaxed">
              Information overload isn't a badge of honor. We build systems that filter the noise and surface what matters.
            </p>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- CTA Section: How Can We Help -->
  <section class="py-12 md:py-20">
    <div class="max-w-screen-xl mx-auto px-4 md:px-8">
      <div class="max-w-5xl mx-auto">
        <h3 class="text-sm uppercase tracking-widest text-petrol mb-8 font-medium">How can we help?</h3>
      
      <div class="space-y-4 md:space-y-6">
        <!-- Strategic Guidance -->
        <div class="flex gap-4 md:gap-6 items-center">
          <div class="bg-tint-cool rounded-xl md:rounded-2xl p-3 md:p-4 flex-shrink-0 w-16 h-16 md:w-24 md:h-24 flex items-center justify-center">
            <img src="/images/illustrations/guide.svg" alt="" class="w-10 h-10 md:w-14 md:h-14" />
          </div>
          <div>
            <h4 class="font-sans text-lg md:text-xl font-bold text-ink mb-1 md:mb-2">Not sure where to start? We love to educate.</h4>
            <p class="text-graphite text-sm leading-relaxed">
              We help leaders understand the options and build a practical AI roadmap.
            </p>
          </div>
        </div>

        <!-- Legacy Modernization -->
        <div class="flex gap-4 md:gap-6 items-center">
          <div class="bg-tint-warm rounded-xl md:rounded-2xl p-3 md:p-4 flex-shrink-0 w-16 h-16 md:w-24 md:h-24 flex items-center justify-center">
            <img src="/images/illustrations/modernize.svg" alt="" class="w-10 h-10 md:w-14 md:h-14" />
          </div>
          <div>
            <h4 class="font-sans text-lg md:text-xl font-bold text-ink mb-1 md:mb-2">Legacy system holding you back?</h4>
            <p class="text-graphite text-sm leading-relaxed">
              We integrate AI into what you have—unlocking its raw potential quickly.
            </p>
          </div>
        </div>

        <!-- New Product Development -->
        <div class="flex gap-4 md:gap-6 items-center">
          <div class="bg-tint-lavender rounded-xl md:rounded-2xl p-3 md:p-4 flex-shrink-0 w-16 h-16 md:w-24 md:h-24 flex items-center justify-center">
            <img src="/images/illustrations/build.svg" alt="" class="w-10 h-10 md:w-14 md:h-14" />
          </div>
          <div>
            <h4 class="font-sans text-lg md:text-xl font-bold text-ink mb-1 md:mb-2">Building something new?</h4>
            <p class="text-graphite text-sm leading-relaxed">
              From concept to launch, AI-native products that solve real problems.
            </p>
          </div>
        </div>
      </div>

      <div class="mt-8">
        <a 
          href="mailto:hey@thefocus.ai" 
          class="inline-block px-8 py-4 border-2 border-petrol text-petrol font-medium uppercase text-sm tracking-wider hover:bg-petrol hover:text-paper transition-colors"
        >
          Let's Talk
        </a>
      </div>
      </div>
    </div>
  </section>

  <!-- Case Study Highlights -->
  <section class="py-12 md:py-20">
    <div class="max-w-5xl">
      <h3 class="text-sm uppercase tracking-widest text-petrol mb-6 font-medium">Real Results</h3>
      <h2 class="font-sans text-4xl md:text-5xl font-bold text-ink mb-4">Case Studies</h2>
      <p class="text-xl text-graphite mb-8">
        See how we've helped organizations distill signal from noise and transform their workflows.
      </p>

      <div class="space-y-8">
        {featuredCaseStudies.map((study) => (
          <article class="border border-ink/10 rounded-lg p-8 hover:border-petrol/30 transition-colors">
            <div class="flex flex-col md:flex-row gap-8">
              <div class="flex-1">
                <h3 class="text-2xl font-bold text-ink mb-3">
                  <a href={`/case-study/${study.id}`} class="hover:text-petrol transition-colors">
                    {study.data.title}
                  </a>
                </h3>
                <p class="text-sm text-petrol mb-4">{study.data.industry} • {study.data.year}</p>
                <p class="text-graphite leading-relaxed mb-6">
                  {study.data.description}
                </p>
                {study.data.testimonial && (
                  <blockquote class="border-l-4 border-petrol pl-6 italic text-graphite">
                    <p class="mb-3">"{study.data.testimonial}"</p>
                    <footer class="text-sm not-italic">
                      — {study.data.testimonial_person}, {study.data.testimonial_company}
                    </footer>
                  </blockquote>
                )}
              </div>
              {study.data.image && images[`/src/content/assets/case-studies/${study.data.image}`] && (
                <div class="md:w-64 flex-shrink-0 relative overflow-hidden rounded">
                  {getVideoPath(study.data.image) ? (
                    <video
                      autoplay
                      loop
                      muted
                      playsinline
                      class="w-full h-auto"
                    >
                      <source src={getVideoPath(study.data.image)} type="video/mp4" />
                    </video>
                  ) : (
                    <Image
                      src={images[`/src/content/assets/case-studies/${study.data.image}`].default}
                      alt={study.data.title}
                      class="w-full h-auto"
                      width={256}
                    />
                  )}
                </div>
              )}
            </div>
            <div class="mt-6">
              <a
                href={`/case-study/${study.id}`}
                class="text-petrol hover:underline font-medium uppercase text-sm tracking-wide"
              >
                Read Case Study →
              </a>
            </div>
          </article>
        ))}
      </div>

      <div class="mt-8 text-center">
        <a
          href="/case-studies"
          class="inline-block px-8 py-4 border-2 border-petrol text-petrol font-medium uppercase text-sm tracking-wider hover:bg-petrol hover:text-paper transition-colors"
        >
          View All Case Studies
        </a>
      </div>
    </div>
  </section>

  <!-- How We Do It -->
  <div class="relative left-1/2 right-1/2 -ml-[50vw] -mr-[50vw] w-screen bg-tint-warm py-12 md:py-20">
    <div class="max-w-screen-xl mx-auto px-4 md:px-8">
      <div class="max-w-4xl">
        <h3 class="text-sm uppercase tracking-widest text-petrol mb-6 font-medium">Our Process</h3>
        <h2 class="font-sans text-4xl md:text-5xl font-bold text-ink mb-8">How we work with you</h2>

        <div class="prose prose-lg max-w-none text-graphite">
        <p class="text-xl leading-relaxed mb-8">
          We start by listening. Before we write a single line of code, we need to understand where you are—your current systems, your pain points, and what success actually looks like for your team. We love to educate as much as we love to build, so expect honest conversations about what AI can (and can't) solve.
        </p>

        <div class="bg-paper border-l-4 border-petrol p-8 rounded my-12">
          <p class="text-lg italic text-graphite mb-4">
            "TheFocusAI didn't just build what we asked for—they helped us understand what we actually needed. The clarity they brought to our AI strategy was as valuable as the product itself."
          </p>
          <p class="text-sm font-medium text-ink">
            — <a href="https://www.linkedin.com/in/joshclee/" 
            class="text-petrol hover:underline">Josh Lee</a>, CEO, 
            AI-Solutions
          </p>
        </div>

        <h3 class="font-sans text-2xl font-bold text-ink mb-6">What to expect:</h3>
        <ul class="space-y-4 mb-8">
          <li class="flex gap-4">
            <span class="text-petrol font-bold flex-shrink-0">→</span>
            <span><strong>Understand</strong> — We dig into your current systems, workflows, and frustrations. No assumptions.</span>
          </li>
          <li class="flex gap-4">
            <span class="text-petrol font-bold flex-shrink-0">→</span>
            <span><strong>Educate</strong> — We walk you through the options and trade-offs so you can make informed decisions.</span>
          </li>
          <li class="flex gap-4">
            <span class="text-petrol font-bold flex-shrink-0">→</span>
            <span><strong>Roadmap</strong> — We define a practical path forward—whether that's connecting siloed data, building a new interface, or modernizing what you already have.</span>
          </li>
        </ul>

        <div class="mt-10">
          <a 
            href="mailto:hey@thefocus.ai" 
            class="inline-block px-8 py-4 border-2 border-petrol text-petrol font-medium uppercase text-sm tracking-wider hover:bg-petrol hover:text-paper transition-colors"
          >
            Connect With Us to Begin
          </a>
        </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Products/Tools Preview -->
  <section class="py-12 md:py-20">
    <div class="max-w-4xl">
      <h3 class="text-sm uppercase tracking-widest text-petrol mb-6 font-medium">Our Tools</h3>
      <h2 class="font-sans text-4xl md:text-5xl font-bold text-ink mb-8">TheFocus.AI Products</h2>

      <div class="grid sm:grid-cols-2 gap-6">
        <div class="border border-ink/10 rounded-lg p-6 hover:border-petrol/30 transition-colors">
          <h4 class="font-sans text-xl font-bold text-ink mb-3">Distill for X</h4>
          <p class="text-graphite">Clean up the noise from your X/Twitter feed and focus on what matters.</p>
        </div>
        <div class="border border-ink/10 rounded-lg p-6 hover:border-petrol/30 transition-colors">
          <h4 class="font-sans text-xl font-bold text-ink mb-3">Distill for YouTube</h4>
          <p class="text-graphite">Extract signal from YouTube content without the distractions.</p>
        </div>
        <div class="border border-ink/10 rounded-lg p-6 hover:border-petrol/30 transition-colors">
          <h4 class="font-sans text-xl font-bold text-ink mb-3">Rackets.AI</h4>
          <p class="text-graphite">AI-powered insights for racquet sports enthusiasts.</p>
        </div>
      </div>

      <div class="mt-8">
        <a href="/tools" class="text-petrol hover:underline font-medium uppercase text-sm tracking-wide">
          Explore All Tools →
        </a>
      </div>
    </div>
  </section>
</BaseLayout>
