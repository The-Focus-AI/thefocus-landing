---
import PostImage from "./postimage.astro";
import Card from "./card.astro";
import { getSlug, getTagSlug, getPostLink } from "../utils/posts";
const {post} = Astro.props;

const dateOptions: object = {
	year: "numeric",
	month: "long",
	day: "numeric",
};
const postLink = getPostLink(post);
const formattedPublishDate = new Date(post.data.date).toLocaleDateString("en-US", dateOptions);

---

<Card>
    <div slot="header">
        <h2 class="text-2xl font-bold"><a href={postLink}>{post.data.published ? "" : "[DRAFT] "}{post.data.title || post.id}</a></h2>
        <div class="flex place-items-baseline">
        <p class="text-sm py-2"> 
            <a class="text-blue-500 hover:underline" href="mailto:wschenk@thefocus.ai">Will Schenk</a> 
            <span class="text-sm ">{formattedPublishDate}</span> 
            </p>
            <ul class="inline px-2 py-2 flex flex-row flex-wrap gap-2">
                {post.data.tags?.map((tag) => <li class="bg-gray-100 text-gray-600 rounded-sm px-1 py-0 text-sm">#<a href={getTagSlug(tag)}>{tag}</a></li>)}
            </ul>
        </div>
    </div>
    {post.data.image && <a href={postLink} slot="image"><PostImage post={post} /></a>}
    <p class="text-lg leading-relaxed"><a href={postLink}>{post.data.description}</a></p>
    <a slot="footer" href={postLink} class="flex items-center gap-1">Read more <span class="text-lg">â†’</span></a>
</Card>