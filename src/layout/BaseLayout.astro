---
import '../styles/fonts.css';
// import '@fontsource-variable/noto-serif';
import '@fontsource/noto-serif/300.css';
import '@fontsource/noto-serif/400.css';
import '@fontsource/noto-serif/500.css';
import '@fontsource/iosevka-etoile';
//import '../fonts/bembo.css';
import '@fontsource/fraunces';
import EmailSignup from "../components/email-signup.astro";
import OrganizationSchema from "../components/schemas/organization.astro";
import WebsiteSchema from "../components/schemas/website.astro";
import NewsletterSchema from "../components/schemas/newsletter.astro";
import { SEO } from "astro-seo";

const pageTitle = Astro.props.pageTitle || "the focus.ai";
const bigHeader = Astro.props.bigHeader || false;
const showOrganizationSchema = Astro.props.showOrganizationSchema || false;

const description = Astro.props.description || "Come a visit us";
const { site } = Astro;
const openGraphImageUrl = `${site}${Astro.props.openGraphImage || 'og.png'}`;

let category = Astro.props.category || "home";
---
<!DOCTYPE html>
<html lang="en" data-theme="light" class="antialiased subpixel-antialiased">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="generator" content={Astro.generator} />
    <title>{pageTitle}</title>
    <SEO
      title={pageTitle}
      description={description}
      openGraph={{
        basic: {
          title: pageTitle,
          type: "website",
          image: openGraphImageUrl
        },
        optional: {
          description: description,
        }
      }}
      twitter={{
        card: "summary_large_image",
        creator: "@wschenk"
      }}
      extend={{
        // extending the default link tags
        link: [{ rel: "icon", href: "/favicon.ico" }],
        // extending the default meta tags
        meta: [
          {
            name: "twitter:image",
            content: openGraphImageUrl,
          },
          { name: "twitter:title", content: pageTitle },
          { name: "twitter:description", content: description },
        ],
      }}
    />
    <link
    rel="alternate"
    type="application/rss+xml"
    title="The Focus AI"
    href={new URL("rss.xml", Astro.site)}
/>
<script defer data-domain="thefocus.ai" src="https://plausible.io/js/script.file-downloads.js"></script>
    <link rel="icon" type="image/x-icon" href="/favicon.ico" />
    <link rel="manifest" href="/site.webmanifest" />

    <!-- Always include Website schema on all pages -->
    <WebsiteSchema />
    
    <!-- Conditionally include Organization schema -->
    {showOrganizationSchema && (
      <OrganizationSchema />
      
    )}

    <NewsletterSchema url="https://newsletter.thefocus.ai/"/>
    
    <!-- Other head elements -->
    <slot name="head" />
  </head>
  <body class={`text-ink overflow-x-hidden ${category === 'insights' || category === 'tools' ? 'bg-[#e8e6df]' : 'bg-paper'}`}>
    <!-- Report Banner - hidden on mobile for cleaner first impression -->
    <div class="hidden sm:block bg-rand-blue text-white">
      <a href="/reports/aiecode-2025-11/" class="block max-w-screen-xl mx-auto px-4 md:px-8 py-3 text-center text-sm hover:opacity-90 transition-opacity">
        <span class="font-medium">NEW:</span> Our latest report on the current state of AI Engineering is now available
        <span class="ml-2 inline-block">→</span>
      </a>
    </div>
    <header id="site-header" class="border-b border-ink/10 transition-all duration-300">
      <div id="header-inner" class="max-w-screen-xl mx-auto px-5 md:px-8 py-5 md:py-8 flex flex-row justify-between items-center gap-4 transition-all duration-300">
        <a href="/" class="group" id="logo-link">
          <h1 class="text-sm font-medium uppercase tracking-[0.15em]">
            <span class="opacity-30 group-hover:opacity-100 transition-opacity duration-150 text-ink">[</span><span class="text-graphite group-hover:text-ink transition-colors duration-150">F<span id="logo-collapse" class="inline-block overflow-hidden transition-all duration-300 ease-out" style="max-width: 4.5em; vertical-align: bottom;">OCUS</span><span class="text-graphite group-hover:text-ink transition-colors duration-150">/</span>AI</span><span class="opacity-30 group-hover:opacity-100 transition-opacity duration-300 text-ink">]</span>
          </h1>
        </a>
        <!-- Mobile menu button -->
        <button id="mobile-menu-btn" class="md:hidden p-2 -mr-2 text-graphite hover:text-ink" aria-label="Toggle menu">
          <svg class="w-6 h-6" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
            <path stroke-linecap="round" stroke-linejoin="round" d="M4 6h16M4 12h16M4 18h16" />
          </svg>
        </button>
        <!-- Desktop nav -->
        <nav class="hidden md:block">
          <ul class="flex flex-wrap gap-x-6 gap-y-2 text-sm uppercase tracking-[0.15em] text-graphite">
            <li>
              <a href="/case-studies" class:list={["group inline-block", category === "case-studies" ? "text-ink" : ""]}>
                <span class="opacity-30 group-hover:opacity-100 transition-opacity duration-150 text-ink">[</span><span class="group-hover:text-ink transition-colors duration-150">Case Studies</span><span class="opacity-30 group-hover:opacity-100 transition-opacity duration-300 text-ink">]</span>
              </a>
            </li>
            <li>
              <a href="/capabilities" class:list={["group inline-block", category === "capabilities" ? "text-ink" : ""]}>
                <span class="opacity-30 group-hover:opacity-100 transition-opacity duration-150 text-ink">[</span><span class="group-hover:text-ink transition-colors duration-150">Capabilities</span><span class="opacity-30 group-hover:opacity-100 transition-opacity duration-300 text-ink">]</span>
              </a>
            </li>
            <li>
              <a href="/about" class:list={["group inline-block", category === "about" ? "text-ink" : ""]}>
                <span class="opacity-30 group-hover:opacity-100 transition-opacity duration-150 text-ink">[</span><span class="group-hover:text-ink transition-colors duration-150">About</span><span class="opacity-30 group-hover:opacity-100 transition-opacity duration-300 text-ink">]</span>
              </a>
            </li>
            <li>
              <a href="mailto:hey@thefocus.ai" class="group inline-block">
                <span class="opacity-30 group-hover:opacity-100 transition-opacity duration-150 text-ink">[</span><span class="group-hover:text-ink transition-colors duration-150">Contact</span><span class="opacity-30 group-hover:opacity-100 transition-opacity duration-300 text-ink">]</span>
              </a>
            </li>
            <li class="text-graphite/30">/</li>
            <li>
              <a href="/insights" class:list={["group inline-block", category === "insights" ? "text-ink" : ""]}>
                <span class="opacity-30 group-hover:opacity-100 transition-opacity duration-150 text-ink">[</span><span class="group-hover:text-ink transition-colors duration-150">Insights</span><span class="opacity-30 group-hover:opacity-100 transition-opacity duration-300 text-ink">]</span>
              </a>
            </li>
            <li>
              <a href="/tools" class:list={["group inline-block", category === "tools" ? "text-ink" : ""]}>
                <span class="opacity-30 group-hover:opacity-100 transition-opacity duration-150 text-ink">[</span><span class="group-hover:text-ink transition-colors duration-150">Tools</span><span class="opacity-30 group-hover:opacity-100 transition-opacity duration-300 text-ink">]</span>
              </a>
            </li>
          </ul>
        </nav>
      </div>
      <!-- Mobile nav dropdown -->
      <nav id="mobile-menu" class="hidden md:hidden border-t border-ink/10 bg-paper">
        <ul class="px-5 py-6 space-y-1">
          <li>
            <a href="/case-studies" class:list={["block py-3 text-lg", category === "case-studies" ? "text-ink font-medium" : "text-graphite hover:text-ink"]}>Case Studies</a>
          </li>
          <li>
            <a href="/capabilities" class:list={["block py-3 text-lg", category === "capabilities" ? "text-ink font-medium" : "text-graphite hover:text-ink"]}>Capabilities</a>
          </li>
          <li>
            <a href="/about" class:list={["block py-3 text-lg", category === "about" ? "text-ink font-medium" : "text-graphite hover:text-ink"]}>About</a>
          </li>
          <li>
            <a href="mailto:hey@thefocus.ai" class="block py-3 text-lg text-graphite hover:text-ink">Contact</a>
          </li>
          <li class="border-t border-ink/10 mt-4 pt-4">
            <a href="/insights" class:list={["block py-3 text-lg", category === "insights" ? "text-ink font-medium" : "text-graphite hover:text-ink"]}>Insights</a>
          </li>
          <li>
            <a href="/tools" class:list={["block py-3 text-lg", category === "tools" ? "text-ink font-medium" : "text-graphite hover:text-ink"]}>Tools</a>
          </li>
        </ul>
      </nav>
    </header>
    <script>
      const menuBtn = document.getElementById('mobile-menu-btn');
      const mobileMenu = document.getElementById('mobile-menu');
      menuBtn?.addEventListener('click', () => {
        mobileMenu?.classList.toggle('hidden');
      });
    </script>

    <slot name="hero"/>


    <main class="w-full">

      <section class:list={[
          "max-w-screen-xl mx-auto py-6 px-5 md:px-8",
          bigHeader ? "md:py-12" : ""
        ]}>
        <slot/>
      </section>

      <EmailSignup />

      <section class="bg-ink text-paper py-16 md:py-24 px-5 md:px-8">
        <div class="max-w-screen-xl mx-auto text-center">
          <h2 class="text-2xl sm:text-3xl md:text-5xl font-bold mb-4">
            Ready to distill signal from noise?
          </h2>
          <p class="text-paper/70 text-lg md:text-xl mb-10 max-w-2xl mx-auto">
            Whether you're exploring possibilities or ready to build, we'd love to hear what you're working on.
          </p>
          <div class="flex flex-col sm:flex-row gap-4 justify-center">
            <a
              href="mailto:hey@thefocus.ai"
              class="inline-block px-8 py-4 bg-petrol text-paper font-medium uppercase text-sm tracking-wider rounded-full hover:bg-petrol/90 hover:shadow-lg hover:-translate-y-0.5 transition-all duration-200"
            >
              Start a Conversation
            </a>
            <a
              href="/case-studies"
              class="inline-block px-8 py-4 border-2 border-paper/30 text-paper font-medium uppercase text-sm tracking-wider rounded-full hover:border-paper hover:bg-paper/10 hover:-translate-y-0.5 transition-all duration-200"
            >
              See Our Work
            </a>
          </div>
        </div>
      </section>
    </main>

    <footer class="border-t border-ink/10 bg-paper">
      <div class="max-w-screen-xl mx-auto px-5 md:px-8 py-12 md:py-16">
        <div class="grid md:grid-cols-4 gap-12">
          <!-- Company -->
          <div>
            <h3 class="text-xs uppercase tracking-[0.15em] text-ink font-medium mb-4">Company</h3>
            <ul class="space-y-3 text-sm">
              <li><a href="/about" class="text-graphite hover:text-ink transition-colors">About</a></li>
              <li><a href="/case-studies" class="text-graphite hover:text-ink transition-colors">Case Studies</a></li>
              <li><a href="/capabilities" class="text-graphite hover:text-ink transition-colors">Capabilities</a></li>
              <li><a href="/jobs" class="text-graphite hover:text-ink transition-colors">Jobs</a></li>
              <li><a href="mailto:hey@thefocus.ai" class="text-graphite hover:text-ink transition-colors">Contact</a></li>
            </ul>
          </div>

          <!-- Products -->
          <div>
            <h3 class="text-xs uppercase tracking-[0.15em] text-ink font-medium mb-4">Products</h3>
            <ul class="space-y-3 text-sm">
              <li><a href="https://account.thefocus.ai" class="text-graphite hover:text-ink transition-colors" target="_blank" rel="noopener">Distill-X</a></li>
              <li><a href="https://ffffound-browser.thefocus.ai/" class="text-graphite hover:text-ink transition-colors" target="_blank" rel="noopener">FFFFound Browser</a></li>
              <li><a href="https://memes-browser.thefocus.ai" class="text-graphite hover:text-ink transition-colors" target="_blank" rel="noopener">Memes Browser</a></li>
              <li><a href="https://account.thefocus.ai" class="text-graphite hover:text-ink transition-colors" target="_blank" rel="noopener">Registry</a></li>
            </ul>
          </div>

          <!-- Resources -->
          <div>
            <h3 class="text-xs uppercase tracking-[0.15em] text-ink font-medium mb-4">Resources</h3>
            <ul class="space-y-3 text-sm">
              <li><a href="/insights" class="text-graphite hover:text-ink transition-colors">Insights</a></li>
              <li><a href="/tools" class="text-graphite hover:text-ink transition-colors">Tools</a></li>
              <li><a href="https://newsletter.thefocus.ai" class="text-graphite hover:text-ink transition-colors" target="_blank" rel="noopener">Newsletter</a></li>
            </ul>
          </div>

          <!-- Connect -->
          <div>
            <h3 class="text-xs uppercase tracking-[0.15em] text-ink font-medium mb-4">Connect</h3>
            <ul class="space-y-3 text-sm">
              <li><a href="https://github.com/The-Focus-AI" class="text-graphite hover:text-ink transition-colors" target="_blank" rel="noopener">GitHub</a></li>
              <li><a href="https://www.linkedin.com/in/will-schenk-420266/" class="text-graphite hover:text-ink transition-colors" target="_blank" rel="noopener">LinkedIn</a></li>
              <li><a href="https://x.com/wschenk" class="text-graphite hover:text-ink transition-colors" target="_blank" rel="noopener">X / Twitter</a></li>
            </ul>
          </div>
        </div>

        <!-- Hiring -->
        <div class="mt-12 text-center">
          <p class="text-sm text-graphite">
            <span class="text-petrol font-medium">We're hiring.</span> Looking for AI-hungry developers, strategists, and anyone eager to push the boundaries of what's possible. We have offices in NYC, the Hudson Valley, and Northwest Connecticut.
            <a href="/jobs" class="text-petrol hover:underline">View open positions →</a>
          </p>
        </div>

        <div class="mt-8 pt-8 border-t border-ink/10 flex flex-col md:flex-row justify-between items-center gap-4">
          <p class="text-sm text-graphite">© 2026 Focus.AI. All rights reserved.</p>
          <p class="text-sm text-graphite">Distill The Signal From The Noise</p>
        </div>
      </div>
    </footer>
    
    <script>
      // Logo collapse and header shrink on scroll
      const logoCollapse = document.getElementById('logo-collapse');
      const headerInner = document.getElementById('header-inner');
      let ticking = false;
      
      function updateHeader() {
        const scrollY = window.scrollY;
        const isScrolled = scrollY > 50;
        
        if (logoCollapse) {
          if (isScrolled) {
            // Collapsed state
            logoCollapse.style.maxWidth = '0';
            logoCollapse.style.opacity = '0';
          } else {
            // Expanded state
            logoCollapse.style.maxWidth = '4.5em';
            logoCollapse.style.opacity = '1';
          }
        }
        
        // Shrink header padding when scrolled
        if (headerInner) {
          if (isScrolled) {
            headerInner.classList.remove('py-5', 'md:py-8');
            headerInner.classList.add('py-3', 'md:py-4');
          } else {
            headerInner.classList.remove('py-3', 'md:py-4');
            headerInner.classList.add('py-5', 'md:py-8');
          }
        }
        
        ticking = false;
      }
      
      window.addEventListener('scroll', () => {
        if (!ticking) {
          window.requestAnimationFrame(() => {
            updateHeader();
            ticking = false;
          });
          ticking = true;
        }
      });
      
      // Initial state
      updateHeader();
    </script>
  </body>
</html>
